&nbsp; 
<DIV class=page-header>
<H1 class=single-title itemprop="headline">Code Coverage with Cobertura in Maven 3</H1></DIV>
<P class=meta>Posted <TIME pubdate="" datetime="2012-07-3">July 3, 2012</TIME> by <A title="Posts by Bryan Saunders" href="http://bryansaunders.net/blog/author/admin/" rel=author>Bryan Saunders</A> <SPAN class=amp>&amp;</SPAN> filed under <A title="View all posts in Best Practices" href="http://bryansaunders.net/blog/category/development/best-practices/" rel="category tag">Best Practices</A>, <A title="View all posts in Development" href="http://bryansaunders.net/blog/category/development/" rel="category tag">Development</A>, <A title="View all posts in Java" href="http://bryansaunders.net/blog/category/development/java/" rel="category tag">Java</A>, <A title="View all posts in Maven" href="http://bryansaunders.net/blog/category/development/maven/" rel="category tag">Maven</A>, <A title="View all posts in Testing" href="http://bryansaunders.net/blog/category/testing/" rel="category tag">Testing</A>.</P></HEADER><SECTION class="post_content clearfix" itemprop="articleBody">
<H3>Code Coverage</H3>
<P>Code coverage is a metric used to determine how much of your code is executed by your automated test suite. It is typically only applied to unit &amp; integration tests, but it can be applied to all automated tests. There are several different code coverage tools on the market. The two most well known for Java are Cobertura and EclEmma/JaCoCo.</P>
<H3>Cobertura</H3>
<P>Cobertura is a free Java tool that calculates the percentage of code accessed by tests. It can be used to identify which parts of your Java program are lacking test coverage. Cobertura is generally a stand-alone application, however it can also be executed from Ant tasks, IDE Plugins, or Maven Plugins. When Cobertura is executed, it will generate a series of reports that show each line of code, and how many times it was executed. It will also show things like line coverage, branch coverage, &amp; package coverage.</P>
<H3>Configuring Maven 3</H3>
<P>The following code will configure Maven 3 to execute the Cobertura plugin during the package phase of the build lifecycle. If the code has line rate of less that 85%, or any single file has a line rate of less than 75%, then the build will fail.<BR></P><PRE class=devcodeblock title=XML><DIV class=devcodeoverflow><TABLE class=devcodearea width="100%"><TBODY><TR><TD class=devcodelines width="1%">01</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline"><SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;plugin<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">02</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">	<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;groupId<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN>org.codehaus.mojo<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/groupId<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">03</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">	<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;artifactId<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN>cobertura-maven-plugin<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/artifactId<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">04</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">	<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;version<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN>2.5.1<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/version<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">05</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">	<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;configuration<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">06</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">		<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;instrumentation<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">07</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">			<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;includes<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/includes<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">08</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">			<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;excludes<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">09</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">				<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;exclude<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN>net/bryansaunders/**/*Test.class<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/exclude<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">10</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">			<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/excludes<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">11</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">		<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/instrumentation<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">12</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">		<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;check<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">13</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">			<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;lineRate<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN>75<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/lineRate<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">14</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">			<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;totalLineRate<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN>85<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/totalLineRate<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">15</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">			<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;haltOnFailure<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN>true<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/haltOnFailure<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">16</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">		<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/check<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">17</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">	<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/configuration<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">18</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">	<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;executions<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">19</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">		<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;execution<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">20</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">			<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;id<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN>clean<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/id<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">21</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">			<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;phase<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN>clean<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/phase<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">22</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">			<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;goals<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">23</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">				<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;goal<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN>clean<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/goal<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">24</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">			<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/goals<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">25</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">		<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/execution<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">26</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">		<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;execution<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">27</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">			<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;id<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN>package<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/id<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">28</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">			<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;phase<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN>package<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/phase<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">29</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">			<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;goals<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">30</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">				<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;goal<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN>check<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/goal<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">31</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">			<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/goals<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">32</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline">		<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/execution<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class=devcodelines width="1%">33</TD><TD class=devcodelinesarea><PRE class="devcode devcodeline">	<SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/executions<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR><TR><TD class="devcodelines devcodelinesodd devcodelinesodd" width="1%">34</TD><TD class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><PRE class="devcode devcodeline"><SPAN style="COLOR: #009900"><SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&lt;/plugin<SPAN style="COLOR: #000000; FONT-WEIGHT: bold">&gt;</SPAN></SPAN></SPAN></PRE></TD></TR></TBODY></TABLE></DIV></PRE><BR>Along with <STRONG>lineRate</STRONG> and <STRONG>totalLineRate</STRONG> properties, there are four other that you can set as well, they are: 
<P></P>
<UL>
<LI><STRONG>branchRate</STRONG> &#8211; Specify the minimum acceptable branch coverage rate needed by each class 
<LI><STRONG>totalBranchRate</STRONG> &#8211; Specify the minimum acceptable average branch coverage rate needed by the project as a whole 
<LI><STRONG>packageBranchRate</STRONG> &#8211; Specify the minimum acceptable average branch coverage rate needed by each package 
<LI><STRONG>packageLineRate</STRONG> &#8211; Specify the minimum acceptable average line coverage rate needed by each package</LI></UL></SECTION>